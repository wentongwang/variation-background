(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7758b415"],{"0c8f":function(t,n,e){},1619:function(t,n,e){"use strict";e("4de4");var i=e("2b0e");i["default"].filter("filterAmount",(function(t,n){return n||(n=20),t&&t.length>n&&(t=t.substring(0,n)+"..."),t}))},"412a":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Nav"),e("el-main",[e("div",{attrs:{id:"spage-tbshare-container"}},[e("div",{staticClass:"tbshare_popup_enter"},[t._v("过滤选项")]),e("div",{staticClass:"tbshare_popup_main clearfix"},[e("el-card",{staticClass:"box-card"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("功能类型")]),e("el-row",{staticClass:"checkbox-container",attrs:{type:"flex",justify:"start"}},[e("el-checkbox-group",{on:{change:t.handleCheckedOptionsChangeOne},model:{value:t.checkboxGroup1,callback:function(n){t.checkboxGroup1=n},expression:"checkboxGroup1"}},t._l(t.options,(function(n){return e("el-checkbox-button",{key:n.name,attrs:{label:n.name}},[t._v(t._s(n.name)+" "),e("el-tag",{staticClass:"num-tag"},[t._v(t._s(n.num)+" ")])],1)})),1)],1),e("el-divider",{attrs:{"content-position":"left"}},[t._v("SNV/Indel/SV")]),e("el-row",{staticClass:"checkbox-container",attrs:{type:"flex",align:"end"}},[e("el-checkbox-group",{on:{change:t.handleCheckedOptionsChangeThree},model:{value:t.checkboxGroup3,callback:function(n){t.checkboxGroup3=n},expression:"checkboxGroup3"}},t._l(t.options3,(function(n,i){return e("el-checkbox-button",{key:i,attrs:{label:n.name}},[t._v(t._s(n.name)+" "),e("el-tag",{staticClass:"num-tag"},[t._v(t._s(n.num)+" ")])],1)})),1)],1)],1)],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-container"},[e("el-row",{attrs:{type:"flex",justify:"space-between"}},[e("el-col",{attrs:{span:6}},[e("p",{staticClass:"title"},[t._v(t._s(t.position.value)),e("span",{staticClass:"sub-title"})])]),e("el-col",{staticClass:"tools",attrs:{span:10}},[e("el-col",{attrs:{span:10}},[e("div",{staticClass:"tools-1"},[e("p",[t._v(t._s(t.$t("gene.zoom")))]),e("p",{staticClass:"svg-container",on:{click:function(n){return t.zoomClick("10")}}},[e("svg-icon",{attrs:{"icon-class":"narrow"}}),e("span",[t._v("-10x")])],1),e("p",{staticClass:"svg-container",on:{click:function(n){return t.zoomClick("3")}}},[e("svg-icon",{attrs:{"icon-class":"narrow"}}),e("span",[t._v("-3x")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"enlarge"},on:{click:function(n){return t.zoomClick("0.3333")}}}),e("span",[t._v("+3x")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"enlarge"},on:{click:function(n){return t.zoomClick("0.1")}}}),e("span",[t._v("+10x")])],1)])]),e("el-col",{attrs:{span:14}},[e("div",{staticClass:"tools-2"},[e("p",[t._v(t._s(t.$t("gene.move")))]),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Left-3"},on:{click:function(n){return t.moveClick("-95")}}}),e("span",[t._v("-95%")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Left-2"},on:{click:function(n){return t.moveClick("-50")}}}),e("span",[t._v("-50%")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Left-1"},on:{click:function(n){return t.moveClick("-5")}}}),e("span",[t._v("-5%")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Right-1"},on:{click:function(n){return t.moveClick("5")}}}),e("span",[t._v("+5%")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Right-2"},on:{click:function(n){return t.moveClick("50")}}}),e("span",[t._v("+50%")])],1),e("p",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"Right-3"},on:{click:function(n){return t.moveClick("95")}}}),e("span",[t._v("+95%")])],1)])])],1)],1),e("el-divider"),e("div",{staticClass:"axis-container"},[e("svg")]),e("div",{staticClass:"annotation-container"},[e("svg",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{id:"svg-drag"}})]),e("div",{staticClass:"variation-container",on:{click:function(n){return t.variationClick(n)}}},[e("canvas",{attrs:{id:"canvas"}})]),[e("el-row",[e("el-col",{attrs:{span:8}},[e("el-button",{staticClass:"resetBtn",attrs:{type:"primary"},on:{click:t.onReset}},[t._v("初始化")]),e("div",{attrs:{id:"mapChart"}})],1),e("el-col",{attrs:{span:16}},[e("VirtualScroll",{key:t.virtualListValue,ref:"virtualScroll",attrs:{virtualized:!0,data:t.tableData,height:50,"key-prop":"variatiId"},on:{change:function(n){return t.virtualList=n}}},[e("el-table",{ref:"filterTable",staticClass:"gene-table",staticStyle:{width:"100%"},attrs:{stripe:"",size:"mini",data:t.virtualList,height:"540","row-style":t.TableRowStyle,"highlight-current-row":""},on:{"cell-click":t.tableCell}},[e("el-table-column",{attrs:{prop:"variatiId",label:t.$t("gene.table.variatiId"),sortable:"",width:"250"},scopedSlots:t._u([{key:"default",fn:function(n){return["SV"===n.row.variation_type?e("el-link",{attrs:{href:"#/svVariant?id="+n.row.variatiId+"&chrom="+n.row.chrom,type:"primary",target:"_blank"}},[t._v(t._s(t._f("filterAmount")(n.row.variatiId,26)))]):e("el-link",{attrs:{href:"#/variant?id="+n.row.variatiId+"&chrom="+n.row.chrom,type:"primary",target:"_blank"}},[t._v(t._s(t._f("filterAmount")(n.row.variatiId,26)))])]}}])}),e("el-table-column",{attrs:{prop:"gene",label:t.$t("gene.table.gene")}}),e("el-table-column",{attrs:{prop:"rsid",label:t.$t("gene.table.rsid"),width:"100"}}),e("el-table-column",{attrs:{prop:"chn100k_ALL",label:t.$t("gene.table.chn100k_ALL")}}),e("el-table-column",{attrs:{prop:"exonicFunc",label:t.$t("gene.table.exonicFunc")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-badge",{staticClass:"mark",staticStyle:{"margin-top":"15px","margin-right":"5px"},attrs:{"is-dot":"",type:"danger"===n.row.exonicFunColor?"danger":"success"===n.row.exonicFunColor?"success":"info"}}),t._v(t._s(n.row.exonicFuncValue)+" ")]}}])}),e("el-table-column",{attrs:{prop:"variation_type",label:t.$t("gene.table.variation_type"),width:"70"}}),e("el-table-column",{attrs:{prop:"geneDetail",label:t.$t("gene.table.geneDetail")},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v(" "+t._s(t._f("filterAmount")(n.row.geneDetail,100))+" ")]}}])})],1)],1)],1)],1)]],2)])],1)},o=[],a=e("5530"),s=(e("159b"),e("4e82"),e("b680"),e("ac1f"),e("1276"),e("b0c0"),e("d3b7"),e("25f0"),e("cb29"),e("2f62")),r=e("9ce4"),c=e("ca75"),l=e("5698"),u=e("313e"),h=e("03d6b"),f=e("6bf2");e("1619");e("817d");var p={name:"Position",components:{Nav:c["a"],VirtualScroll:f["a"]},directives:{drag:{bind:function(t,n,e){var i=0,o=0,a=!1;t.onmousedown=function(n){i=n.clientX,a=!0,o=0,t.style.cursor="move"},window.onmousemove=function(n){if(0!=a){var e=n.clientX;o=e-i,t.style.left=o+"px"}},t.onmouseup=function(){o<-20&&o>-300?(e.context.moveClick("10"),t.style.cursor="default"):o<-300&&(e.context.moveClick("50"),t.style.cursor="default"),o>300?(e.context.moveClick("-50"),t.style.cursor="default"):o>20&&o<300&&(e.context.moveClick("-10"),t.style.cursor="default"),a=!1,t.style.left="0px",t.style.cursor="default"}}}},data:function(){return{virtualList:[],virtualListValue:void 0,geneData:{genomic:[{chrom:"",source:"",type:"",start:0,end:0,score:"",chain:"",cds_position:"",gene_id:"",parent:"",gene:"",id:1}],variation:[]},filterData:"",loading:!0,radio1:!1,containerWidth:0,minIdxSC:0,svg:"",svg2:"",input:"",checkboxGroup1:["pLoF","Missense","Synonymous","Other"],checkboxGroup3:["SNVs","Indels","SVs"],options:[{name:"pLoF",num:0},{name:"Missense",num:0},{name:"Synonymous",num:0},{name:"Other",num:0}],options2:[{name:"EXomes",num:0},{name:"Genomes",num:0}],options3:[{name:"SNVs",num:0},{name:"Indels",num:0},{name:"SVs",num:0}],tableData:[],colorActive:["rgb(245, 108, 108)","rgb(230, 162, 60)","rgb(103, 194, 58)","rgb(157, 157, 157)"],color:["rgb(253, 226, 226)","rgb(250, 236, 216)","rgb(208, 249, 188)","rgb(233, 233, 235)"],tableBgPos:"",mapkey:0,dataList:[]}},computed:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["position"])),{},{variation:function(){return this.filterData.variation}}),watch:{filterData:function(){var t=this;this.$nextTick((function(){var n=t.containerWidth/20*1.5,e=t.containerWidth-2*n,i=t.position.start-100<0?0:t.position.start-100,o=t.position.end+100,a=[i,o],s=o-i;function r(){var a=100,s=l["k"](".axis-container").select("svg");s.selectAll("*").remove(),s.attr("class","axis").attr("width",t.containerWidth).attr("height",a);var r=l["i"]().domain([i,o]).range([0,e]),c=l["a"]().scale(r).ticks(10).tickPadding(10);s.append("text").attr("x",0).attr("y",50).attr("fill","#409EFF").attr("font-size",20).text((function(){return"chr"+(23===t.position.chrom?"X":t.position.chrom)})),s.append("g").attr("transform",(function(){return"translate("+n+",50)"})).call(c)}function c(n,e){var o=t.containerWidth/20*1.5,a=t.containerWidth-2*o,r=[],u=[],h=0,f=0,p=[],d=null,g=null,m=0;t.svg=l["k"](".annotation-container").select("svg"),t.svg.selectAll("*").remove(),t.svg.style("overflow","visible"),t.annotationColor="#424242",t.filterData.genomic.forEach((function(t){"pseudogene"!==t["type"]&&"gene"!==t["type"]||r.push({start:(t["start"]-i)/s*a,end:(t["end"]-i)/s*a,gene:t["gene"]})})),r.sort((function(t,n){return t["start"]-n["start"]})),r.forEach((function(t,n){h=0,f=-1/0;for(var e=n;e<r.length;e++)h=r[e]["start"],h-f>120&&-1===p.indexOf(r[e]["gene"])&&(f=r[e]["end"],p.push(r[e]["gene"]),u.push(r[e]))})),u.forEach((function(o,r){r>0&&u[r]["start"]-120<u[r-1]["end"]&&(m+=1),d=null,g=null,t.filterData.genomic.forEach((function(e){"."===e["parent"]&&e["gene"]===o["gene"]&&("pseudogene"!==e["type"]&&"gene"!==e["type"]||(d=e["gene_id"],t.svg.append("line").attr("x1",(e["start"]-i)/s*a).attr("y1",13+15*m).attr("x2",(e["end"]-i)/s*a).attr("y2",13+15*m).attr("stroke","#dbdbdb").attr("stroke-width",2),t.svg.append("text").attr("x",(e["start"]-i)/s*a-10.5*e["gene"].length).attr("y",18+15*m).attr("fill","#409EFF").attr("font-size",14).attr("cursor","pointer").attr("geneId",e["gene_id"]).on("click",(function(){var t=l["k"](this).text(),e=l["k"](this).attr("geneId");n===t?c():c(t,e)})).text((function(){return e["gene"]})))),e["parent"]===d&&(g=e["gene_id"]),e["parent"]===g&&("CDS"===e["type"]&&t.svg.append("rect").attr("x",(e["start"]-i)/s*a).attr("y",6+15*m).attr("width",(e["end"]-e["start"])/s*a).attr("height",14).attr("fill","#424242"),"exon"===e["type"]&&t.svg.append("rect").attr("x",(e["start"]-i)/s*a).attr("y",10+15*m).attr("width",(e["end"]-e["start"])/s*a).attr("height",5).attr("fill","#424242").attr("class","UTR"))})),o["gene"]===n&&t.filterData.genomic.forEach((function(n){n["parent"]===e&&(m+=1,g=n["gene_id"],t.svg.append("line").attr("x1",(n["start"]-i)/s*a).attr("y1",13+15*m).attr("x2",(n["end"]-i)/s*a).attr("y2",13+15*m).attr("stroke","#c7def5").attr("stroke-width",2),t.svg.append("text").attr("x",(n["start"]-i)/s*a-8*n["gene_id"].length).attr("y",18+15*m).attr("fill","#409EFF").attr("font-size",12).attr("geneId",n["gene_id"]).text((function(){return n["gene_id"]}))),n["parent"]===g&&("CDS"===n["type"]&&t.svg.append("rect").attr("x",(n["start"]-i)/s*a).attr("y",6+15*m).attr("width",(n["end"]-n["start"])/s*a).attr("height",14).attr("fill","#81bcf9"),"exon"===n["type"]&&t.svg.append("rect").attr("x",(n["start"]-i)/s*a).attr("y",10+15*m).attr("width",(n["end"]-n["start"])/s*a).attr("height",5).attr("fill","#81bcf9").attr("class","UTR"))}))}));var v=16*(m+1);t.svg.attr("height",v).attr("width",a)}r(a),c()}))},variation:function(){var t=this,n=t.position.start-100<0?0:t.position.start-100,e=t.position.end+100,i=e-n;function o(){var e,o,a,s=t.containerWidth/20*1.5,r=t.containerWidth-2*s,c=100,l=document.getElementById("canvas");l.height=c,l.width=r;var u=l.getContext("2d");t.filterData.variation.forEach((function(s,c){a=(s["start"]+parseInt(s["end"]-s["start"]+3)/2-n)/i*r,-1!==s["func"].indexOf("ncRNA_exonic")||-1!==s["func"].indexOf("ncRNA_intronic")||-1!==s["func"].indexOf("intronic")||-1!==s["func"].indexOf("UTR5")||-1!==s["func"].indexOf("UTR3")||-1!==s["func"].indexOf("ncRNA_splicing")||-1!==s["func"].indexOf("UTR5;UTR3")||-1!==s["func"].indexOf("ncRNA_exonic;splicing")||-1!==s["func"].indexOf("ncRNA_UTR5")?(e=t.color[2],o=t.colorActive[2]):-1!==s["func"].indexOf("exonic")||-1!==s["func"].indexOf("splicing")||-1!==s["func"].indexOf("exonic;splicing")?(e=t.color[0],o=t.colorActive[0]):(e=t.color[3],o=t.colorActive[3]),"."!==s["chn100k_ALL"]&&(c<10?t.BezierEllipse1(u,a,50,parseInt(s["end"]-s["start"]+5),parseInt(35*s["chn100k_ALL"]),"#DCDFE6",o):t.BezierEllipse1(u,a,50,parseInt(s["end"]-s["start"]+5),parseInt(35*s["chn100k_ALL"]),"#C0C4CC",e))}))}function a(){t.tableData=[];var n=0,e=0,i=0,o=0,a=0,s=0,r=0,c=0,l=0;t.filterData.variation.forEach((function(u){var h=[],f="",p="";isNaN(u["gnomAD_exome_ALL"])||h.push("E"),isNaN(u["gnomAD_genome_ALL"])||h.push("G"),f=-1!==u["func"].indexOf("ncRNA_exonic")||-1!==u["func"].indexOf("ncRNA_intronic")||-1!==u["func"].indexOf("intronic")||-1!==u["func"].indexOf("UTR5")||-1!==u["func"].indexOf("UTR3")||-1!==u["func"].indexOf("ncRNA_splicing")||-1!==u["func"].indexOf("UTR5;UTR3")||-1!==u["func"].indexOf("ncRNA_exonic;splicing")||-1!==u["func"].indexOf("ncRNA_UTR5")?"success":-1!==u["func"].indexOf("exonic")||-1!==u["func"].indexOf("splicing")||-1!==u["func"].indexOf("exonic;splicing")?"danger":"info",p=-1!==u["exonicFunc"].indexOf(".")?u["func"]:u["func"]+":"+u["exonicFunc"],"splicing"===u["func"]||"exonic;splicing"===u["func"]||"stopgain"===u["exonicFunc"]||"frameshift insertion"===u["exonicFunc"]||"frameshift deletion"===u["exonicFunc"]||"startloss"===u["exonicFunc"]||"stoploss"===u["exonicFunc"]?n+=1:"nonsynonymous SNV"===u["exonicFunc"]||"nonframeshift deletion"===u["exonicFunc"]||"nonframeshift insertion"===u["exonicFunc"]?e+=1:"synonymous SNV"===u["exonicFunc"]||"unknown"===u["exonicFunc"]?i+=1:"splicing"!==u["func"]&&"exonic;splicing"!==u["func"]&&"exonic"!==u["func"]&&(o+=1),-1!==u["variation_type"].indexOf("exome")&&(a+=1),-1!==u["variation_type"].indexOf("genome")&&(s+=1),-1!==u["variation_type"].indexOf("SNV")&&(r+=1),-1!==u["variation_type"].indexOf("INDEL")&&(c+=1),-1!==u["variation_type"].indexOf("SV")&&(l+=1),t.tableData.push({variatiId:u["uu_id"],chrom:u["chrom"],rsid:u["rsid"],exonicFunColor:f,exonicFuncValue:p,variation_type:u["variation_type"],dbsnp:u["af"],chn100k_ALL:parseFloat(100*u["chn100k_ALL"]).toFixed(4)+"%",gene:u["gene"],geneDetail:u["geneDetail"],chn100k_NE:u["chn100k_NE"],chn100k_N:u["chn100k_N"],chn100k_E:u["chn100k_E"],chn100k_C:u["chn100k_C"],chn100k_NW:u["chn100k_NW"],chn100k_SW:u["chn100k_SW"],chn100k_S:u["chn100k_S"]})})),t.options=[{name:"pLoF",num:n},{name:"Missense",num:e},{name:"Synonymous",num:i},{name:"Other",num:o}],t.options2=[{name:"EXomes",num:a},{name:"Genomes",num:s}],t.options3=[{name:"SNVs",num:r},{name:"Indels",num:c},{name:"SVs",num:l}]}o(),a()},input:function(){this.dataFiter()}},created:function(){var t=this;if(this.position.value){var n={start:this.position.start,end:this.position.end,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(r["a"])(n).then((function(e){t.geneData=e,t.filterData=Object.assign({},e),t.containerWidth=parseInt(l["k"](".axis-container").style("width")),t.position.value="chr"+(23===t.position.chrom?"X":t.position.chrom)+"："+n.start+"-"+n.end,t.position.label="chr"+(23===t.position.chrom?"X":t.position.chrom)+"："+n.start+"-"+n.end,t.loading=!1}))}},mounted:function(){var t=this;if(this.$refs.filterTable){var n=document.getElementById("svg-drag");window.addEventListener&&n.addEventListener("DOMMouseScroll",(function(n){var e=n||window.event,i=-e.detail/3;i>=1&&t.zoomClick("3"),i<=-1&&t.zoomClick("0.3333"),n.preventDefault()}),!1),n.onmousewheel=function(n){var e=n||window.event,i=e.wheelDelta/120;return i>=1&&t.zoomClick("3"),i<=-1&&t.zoomClick("0.3333"),!1}}this.initMap(),this.initChart()},methods:{zoomClick:function(t){var n=this,e=parseInt((this.position.end-this.position.start)/2)+this.position.start,i=parseInt((this.position.end-this.position.start)*t/2);if(i>500){var o=e-i<=0?0:e-i,a=e+i,s={start:o,end:a,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(r["a"])(s).then((function(t){n.geneData=t,n.filterData=Object.assign({},t),n.containerWidth=parseInt(l["k"](".axis-container").style("width")),n.position.start=s.start,n.position.end=s.end,n.position.value="chr"+(23===n.position.chrom?"X":n.position.chrom)+"："+s.start+"-"+s.end,n.position.label="chr"+(23===n.position.chrom?"X":n.position.chrom)+"："+s.start+"-"+s.end,n.$store.dispatch("variations/positionSearch",n.position)}))}},moveClick:function(t){var n=this,e=parseInt((this.position.end-this.position.start)/2),i=parseInt((this.position.end-this.position.start)/2+this.position.start+parseInt(t)*e/100),o=i-e<=0?0:i-e,a=o<=0?2*e:i+e;if(this.position.start>0||t>0){var s={start:o,end:a,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(r["a"])(s).then((function(t){n.geneData=t,n.filterData=Object.assign({},t),n.containerWidth=parseInt(l["k"](".axis-container").style("width")),n.position.start=s.start,n.position.end=s.end,n.position.value="chr"+(23===n.position.chrom?"X":n.position.chrom)+"："+s.start+"-"+s.end,n.position.label="chr"+(23===n.position.chrom?"X":n.position.chrom)+"："+s.start+"-"+s.end,n.$store.dispatch("variations/positionSearch",n.position)}))}},filterHandler:function(t,n,e){var i=e["property"];return n[i]===t},handleCheckedOptionsChangeOne:function(t){this.dataFiter()},handleCheckedOptionsChangeTwo:function(t){this.dataFiter()},handleCheckedOptionsChangeThree:function(t){this.dataFiter()},variationClick:function(t){var n=this;this.dom=this.$refs.filterTable.bodyWrapper;var e,i,o,a=this.dom.clientHeight,s=this.dom.scrollHeight,r=s-a,c=n.position.start-100<0?0:n.position.start-100,l=n.position.end+100,u=l-c,h=n.containerWidth/20*1.5,f=n.containerWidth-2*h,p=1/0,d=0,g=document.getElementById("canvas"),m=g.getContext("2d");m.clearRect(0,0,f,100),this.filterData.variation.forEach((function(e,i){o=(e["start"]+parseInt(e["end"]-e["start"]+5)/2-c)/u*f,Math.abs(t.x-h-20-o)<p&&(p=Math.abs(t.x-h-20-o),n.minIdxSC=i,n.minIdxSC<5?(d=0,n.minIdxSC=5):n.minIdxSC>n.filterData.variation.length-6?(d=n.filterData.variation.length-1,n.minIdxSC=n.filterData.variation.length-5):d=n.minIdxSC)})),this.filterData.variation.forEach((function(t,a){o=(t["start"]+parseInt(t["end"]-t["start"]+3)/2-c)/u*f,-1!==t["func"].indexOf("ncRNA_exonic")||-1!==t["func"].indexOf("ncRNA_intronic")||-1!==t["func"].indexOf("intronic")||-1!==t["func"].indexOf("UTR5")||-1!==t["func"].indexOf("UTR3")||-1!==t["func"].indexOf("ncRNA_splicing")||-1!==t["func"].indexOf("UTR5;UTR3")||-1!==t["func"].indexOf("ncRNA_exonic;splicing")||-1!==t["func"].indexOf("ncRNA_UTR5")?(e=n.color[2],i=n.colorActive[2]):-1!==t["func"].indexOf("exonic")||-1!==t["func"].indexOf("splicing")||-1!==t["func"].indexOf("exonic;splicing")?(e=n.color[0],i=n.colorActive[0]):(e=n.color[3],i=n.colorActive[3]),"."!==t["chn100k_ALL"]&&(n.minIdxSC-a<6&&n.minIdxSC-a>-6?n.BezierEllipse1(m,o,50,parseInt(t["end"]-t["start"]+5),parseInt(35*t["chn100k_ALL"]),"#DCDFE6",i):n.BezierEllipse1(m,o,50,parseInt(t["end"]-t["start"]+5),parseInt(35*t["chn100k_ALL"]),"#C0C4CC",e))})),this.dom.scrollTop=r*d/(this.filterData.variation.length-1)},geneListClick:function(t,n){if("gene"===this.geneList[n].type||"pseudogene"===this.geneList[n].type){var e=this.$router.resolve({name:"Gene"});this.$store.dispatch("variations/geneSearch",{chrom:parseInt(this.geneList[n].chrom.split(".")[0].split("_")[1]),value:this.geneList[n].gene,label:this.geneList[n].gene,type:this.geneList[n].type,start:parseInt(this.geneList[n].start)-1,end:parseInt(this.geneList[n].end)+1}),window.open(e.href,"_blank")}},dataFiter:function(){var t,n=this,e=[];n.filterData.variation=[],this.input?n.geneData.variation.forEach((function(i){if(-1!==i["uuId"].indexOf(n.input)){t=0;while(t<n.checkboxGroup1.length)("pLoF"!==n.checkboxGroup1[t]||"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"stopgain"!==i["exonicFunc"]&&"frameshift insertion"!==i["exonicFunc"]&&"frameshift deletion"!==i["exonicFunc"]&&"startloss"!==i["exonicFunc"]&&"stoploss"!==i["exonicFunc"])&&("Missense"!==n.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"nonsynonymous SNV"!==i["exonicFunc"]&&"nonframeshift deletion"!==i["exonicFunc"]&&"nonframeshift insertion"!==i["exonicFunc"])&&("Synonymous"!==n.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"synonymous SNV"!==i["exonicFunc"]&&"unknown"!==i["exonicFunc"])?"Other"===n.checkboxGroup1[t]&&"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"exonic"!==i["func"]&&e.push(i):e.push(i),t++}})):n.geneData.variation.forEach((function(i){t=0;while(t<n.checkboxGroup1.length)("pLoF"!==n.checkboxGroup1[t]||"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"stopgain"!==i["exonicFunc"]&&"frameshift insertion"!==i["exonicFunc"]&&"frameshift deletion"!==i["exonicFunc"]&&"startloss"!==i["exonicFunc"]&&"stoploss"!==i["exonicFunc"])&&("Missense"!==n.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"nonsynonymous SNV"!==i["exonicFunc"]&&"nonframeshift deletion"!==i["exonicFunc"]&&"nonframeshift insertion"!==i["exonicFunc"])&&("Synonymous"!==n.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"synonymous SNV"!==i["exonicFunc"]&&"unknown"!==i["exonicFunc"])?"Other"===n.checkboxGroup1[t]&&"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"exonic"!==i["func"]&&e.push(i):e.push(i),t++})),e.forEach((function(t){for(var e=0;e<n.checkboxGroup3.length;e++)"SNVs"===n.checkboxGroup3[e]&&-1!==t["variation_type"].indexOf("SNV")&&n.filterData.variation.push(t),"Indels"===n.checkboxGroup3[e]&&-1!==t["variation_type"].indexOf("INDEL")&&n.filterData.variation.push(t),"SVs"===n.checkboxGroup3[e]&&-1!==t["variation_type"].indexOf("SV")&&n.filterData.variation.push(t)}))},mergeProvinces:function(t,n,e){for(var i=t.features,o=[],a=[],s=0;s<n.length;s++){for(var r=[],c=[],l=0;l<n[s].length;l++)for(var u=0;u<i.length;u++)if(i[u].properties.name==n[s][l]){if(i[u].geometry.coordinates[0].constructor==String)for(var h=0;h<i[u].geometry.coordinates.length;h++)r.push(i[u].geometry.coordinates[h]);else if(i[u].geometry.coordinates[0].constructor==Array)for(var f=0;f<i[u].geometry.coordinates.length;f++)for(var p=0;p<i[u].geometry.coordinates[f].length;p++)r.push(i[u].geometry.coordinates[f][p]);if(i[u].geometry.encodeOffsets[0].constructor==String)c.push(i[u].geometry.encodeOffsets);else if(i[u].geometry.encodeOffsets[0].constructor==Array)for(f=0;f<i[u].geometry.encodeOffsets.length;f++)if(i[u].geometry.encodeOffsets[f][0].constructor==Array)for(var d=0;d<i[u].geometry.encodeOffsets[f].length;d++)c.push(i[u].geometry.encodeOffsets[f][d]);else c.push(i[u].geometry.encodeOffsets[f]);break}o.push(r),a.push(c)}i=[];for(var g=0;g<n.length;g++){var m={id:i.length.toString(),type:"FeatureCollection",geometry:{type:"Polygon",coordinates:o[g],encodeOffsets:a[g]},properties:{name:e.name[g]||"",childNum:o[g].length}};e.cp[g]&&(m.properties.cp=e.cp[g]),i.push(m)}t.features=i},initMap:function(){var t={names:[["北京","天津","河北","山西","内蒙古"],["黑龙江","吉林","辽宁"],["山东","江苏","安徽","江西","浙江","福建","上海","台湾"],["河南","湖北","湖南"],["广东","广西","海南","香港","澳门"],["重庆","四川","云南","西藏","贵州"],["陕西","甘肃","青海","宁夏","新疆"]],properties:{name:["华北","东北","华东","华中","华南","西南","西北"],cp:[[116.24,39.54],[126.32,43.5],[121.28,31.13],[114.2,30.32],[113.15,23.08],[104.04,30.39],[103.49,36.03]]}};h.features&&h.features.length>8&&this.mergeProvinces(h,t.names,t.properties),u["registerMap"]("china",h)},initChart:function(t){var n=this,e=document.getElementById("mapChart"),i=document.body.clientWidth;e.style.height=540/1903*i+"px";var o=u["init"](e),a={tooltip:{trigger:"item",formatter:function(t){return t.name}},visualMap:{type:"piecewise",left:"left",top:"top",splitNumber:4,pieces:[{min:.05,max:1,label:"5%-100%",color:"#f96262"},{min:.01,max:.05,label:"1%-5%",color:"#f5c63a"},{min:.005,max:.01,label:"0.5%-1%",color:"#48bd48"},{min:0,max:.005,label:"0%-0.5%",color:"#40a1e5"},{value:0,label:"0%",color:"#eeeeee"}],show:!0},geo:{map:"china",roam:!1,center:[105,35],zoom:1,label:{normal:{show:!0,fontSize:"12",color:"rgba(0,0,0,0.7)"},emphasis:{textStyle:{color:"#fff"}}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"#F3B329",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},series:[{name:"变异数量",type:"map",geoIndex:0,data:t}]};o.setOption(a,!0),o.on("click",(function(t){"东北"===t.name&&(n.tableBgPos="chn100k_NE",n.dataList=[{name:"东北",value:.004}]),"华北"===t.name&&(n.tableBgPos="chn100k_N",n.dataList=[{name:"华北",value:.004}]),"华东"===t.name&&(n.tableBgPos="chn100k_E",n.dataList=[{name:"华东",value:.004}]),"华中"===t.name&&(n.tableBgPos="chn100k_C",n.dataList=[{name:"华中",value:.004}]),"华南"===t.name&&(n.tableBgPos="chn100k_S",n.dataList=[{name:"华南",value:.004}]),"西北"===t.name&&(n.tableBgPos="chn100k_NW",n.dataList=[{name:"西北",value:.004}]),"西南"===t.name&&(n.tableBgPos="chn100k_SW",n.dataList=[{name:"西南",value:.004}]),o.clear(),o.off(),n.initChart(n.dataList),n.$refs.filterTable.setCurrentRow()})),this.$nextTick((function(){o.resize()}))},tableCell:function(t,n,e,i){this.dataList=[{name:"东北",value:t.chn100k_NE},{name:"华北",value:t.chn100k_N},{name:"华南",value:t.chn100k_S},{name:"华东",value:t.chn100k_E},{name:"华中",value:t.chn100k_C},{name:"西南",value:t.chn100k_SW},{name:"西北",value:t.chn100k_NW}],""!==this.tableBgPos&&(this.tableBgPos=""),this.initChart(this.dataList)},TableRowStyle:function(t){var n={};return 0<t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.005&&(n.background="rgba(123,189,235,"+1e3*t.row[this.tableBgPos]+")"),.005<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.01&&(n.background="rgba(111,215,111,"+1e3*t.row[this.tableBgPos]+")"),.01<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.05&&(n.background="rgba(245,198,58,"+1e3*t.row[this.tableBgPos]+")"),.05<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<1&&(n.background="rgba(245,138,138,"+1e3*t.row[this.tableBgPos]+")"),n},onReset:function(){""!==this.tableBgPos&&(this.tableBgPos=""),this.dataList.length>0&&(this.dataList=[],this.$refs.filterTable.setCurrentRow(),this.initChart(this.dataList))},BezierEllipse1:function(t,n,e,i,o,a,s){t.save();var r=i>o?i:o,c=i/r,l=o/r;t.scale(c,l),t.beginPath(),t.moveTo((n+i)/c,e/l),t.arc(n/c,e/l,r,0,2*Math.PI),t.closePath(),t.strokeStyle=a,t.fillStyle=s,t.fill(),t.stroke(),t.restore()}}},d=p,g=(e("ac37"),e("b742"),e("2877")),m=Object(g["a"])(d,i,o,!1,null,"1148e326",null);n["default"]=m.exports},ac37:function(t,n,e){"use strict";e("0c8f")},b742:function(t,n,e){"use strict";e("c5a8")},c5a8:function(t,n,e){}}]);