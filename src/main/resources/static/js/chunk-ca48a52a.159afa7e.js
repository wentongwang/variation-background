(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca48a52a"],{"04d1":function(t,e,n){var i=n("342f"),o=i.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},1:function(t,e){},"2eb8":function(t,e,n){"use strict";n("2edd")},"2edd":function(t,e,n){},"412a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),n("el-main",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.geneData.variation,expression:"geneData.variation"}],attrs:{id:"spage-tbshare-container"}},[n("div",{staticClass:"tbshare_popup_enter"},[t._v(t._s(t.$t("gene.filter")))]),n("div",{staticClass:"tbshare_popup_main clearfix"},[n("el-card",{staticClass:"box-card"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.$t("gene.functionType")))]),n("el-row",{staticClass:"checkbox-container",attrs:{type:"flex",justify:"start"}},[n("el-checkbox-group",{on:{change:t.handleCheckedOptionsChangeOne},model:{value:t.checkboxGroup1,callback:function(e){t.checkboxGroup1=e},expression:"checkboxGroup1"}},t._l(t.options,(function(e){return n("el-checkbox-button",{key:e.name,attrs:{label:e.name}},[t._v(t._s(e.name)+" "),n("el-tag",{staticClass:"num-tag"},[t._v(t._s(e.num)+" ")])],1)})),1)],1),n("el-divider",{attrs:{"content-position":"left"}},[t._v("SNV/Indel/SV")]),n("el-row",{staticClass:"checkbox-container",attrs:{type:"flex",align:"end"}},[n("el-checkbox-group",{on:{change:t.handleCheckedOptionsChangeThree},model:{value:t.checkboxGroup3,callback:function(e){t.checkboxGroup3=e},expression:"checkboxGroup3"}},t._l(t.options3,(function(e,i){return n("el-checkbox-button",{key:i,attrs:{label:e.name}},[t._v(t._s(e.name)+" "),n("el-tag",{staticClass:"num-tag"},[t._v(t._s(e.num)+" ")])],1)})),1)],1)],1)],1)]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-container"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:6}},[n("p",{staticClass:"title"},[t._v(t._s(t.position.value)),n("span",{staticClass:"sub-title"})])]),n("el-col",{staticClass:"tools",attrs:{span:10}},[n("el-col",{attrs:{span:10}},[n("div",{staticClass:"tools-1"},[n("p",[t._v(t._s(t.$t("gene.zoom")))]),n("p",{staticClass:"svg-container",on:{click:function(e){return t.zoomClick("10")}}},[n("svg-icon",{attrs:{"icon-class":"narrow"}}),n("span",[t._v("-10x")])],1),n("p",{staticClass:"svg-container",on:{click:function(e){return t.zoomClick("3")}}},[n("svg-icon",{attrs:{"icon-class":"narrow"}}),n("span",[t._v("-3x")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"enlarge"},on:{click:function(e){return t.zoomClick("0.3333")}}}),n("span",[t._v("+3x")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"enlarge"},on:{click:function(e){return t.zoomClick("0.1")}}}),n("span",[t._v("+10x")])],1)])]),n("el-col",{attrs:{span:14}},[n("div",{staticClass:"tools-2"},[n("p",[t._v(t._s(t.$t("gene.move")))]),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Left-3"},on:{click:function(e){return t.moveClick("-95")}}}),n("span",[t._v("-95%")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Left-2"},on:{click:function(e){return t.moveClick("-50")}}}),n("span",[t._v("-50%")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Left-1"},on:{click:function(e){return t.moveClick("-5")}}}),n("span",[t._v("-5%")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Right-1"},on:{click:function(e){return t.moveClick("5")}}}),n("span",[t._v("+5%")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Right-2"},on:{click:function(e){return t.moveClick("50")}}}),n("span",[t._v("+50%")])],1),n("p",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"Right-3"},on:{click:function(e){return t.moveClick("95")}}}),n("span",[t._v("+95%")])],1)])])],1)],1),n("el-divider",{staticClass:"my-divider"}),n("div",{staticClass:"axis-container"},[n("svg")]),n("div",{staticClass:"annotation-container"},[n("svg",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{id:"svg-drag"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.geneData.variation,expression:"geneData.variation"}],staticClass:"variation-container",on:{click:function(e){return t.variationClick(e)}}},[n("canvas",{attrs:{id:"canvas"}})]),[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-button",{staticClass:"resetBtn",attrs:{type:"primary"},on:{click:t.onReset}},[t._v(t._s(t.$t("gene.init")))]),n("div",{attrs:{id:"mapChart"}}),n("div",[[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableSubData,border:""}},[n("el-table-column",{attrs:{prop:"NorthEast","show-overflow-tooltip":!0,label:this.$t("variat.NorthEastAF")}}),n("el-table-column",{attrs:{prop:"NorthChina","show-overflow-tooltip":!0,label:this.$t("variat.NorthChinaAF")}}),n("el-table-column",{attrs:{prop:"EastChina","show-overflow-tooltip":!0,label:this.$t("variat.EastChinaAF")}}),n("el-table-column",{attrs:{prop:"CentralChina","show-overflow-tooltip":!0,label:this.$t("variat.CentralChinaAF")}}),n("el-table-column",{attrs:{prop:"NorthWest","show-overflow-tooltip":!0,label:this.$t("variat.NorthWestAF")}}),n("el-table-column",{attrs:{prop:"SouthWest","show-overflow-tooltip":!0,label:this.$t("variat.SouthWestAF")}}),n("el-table-column",{attrs:{prop:"SouthChina","show-overflow-tooltip":!0,label:this.$t("variat.SouthChinaAF")}})],1)]],2)],1),n("el-col",{attrs:{span:16}},[n("VirtualScroll",{key:t.virtualListValue,ref:"virtualScroll",attrs:{virtualized:!0,data:t.tableData,height:50,"key-prop":"id"},on:{change:function(e){return t.virtualList=e}}},[n("el-table",{ref:"filterTable",staticClass:"gene-table",staticStyle:{width:"100%"},attrs:{"row-key":"id",size:"mini",data:t.virtualList,height:"540","row-style":t.TableRowStyle,"empty-text":t.$t("gene.table.empty"),"highlight-current-row":""},on:{"cell-click":t.tableCell}},[n("el-table-column",{attrs:{prop:"variatiId",label:t.$t("gene.table.variatiId"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return["SV"===e.row.variation_type?n("el-link",{staticClass:"stonebox",staticStyle:{"font-size":"12px"},attrs:{href:"#/svVariant?id="+e.row.variatiId+"&chrom="+e.row.chrom+"&func="+e.row.exonicFuncValue,type:"primary",target:"_blank"},domProps:{innerHTML:t._s(t.secretNumber(e.row.variatiId,26))}}):n("el-link",{staticClass:"stonebox",staticStyle:{"font-size":"12px"},attrs:{href:"#/variant?id="+e.row.variatiId+"&chrom="+e.row.chrom+"&func="+e.row.exonicFuncValue,type:"primary",target:"_blank"},domProps:{innerHTML:t._s(t.secretNumber(e.row.variatiId,26))}})]}}])}),n("el-table-column",{attrs:{prop:"gene",label:t.$t("gene.table.gene")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stonebox",domProps:{innerHTML:t._s(t.secretNumber(e.row.gene))}})]}}])}),n("el-table-column",{attrs:{prop:"rsid",label:t.$t("gene.table.rsid"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stonebox",domProps:{innerHTML:t._s(t.secretNumber(e.row.rsid))}})]}}])}),n("el-table-column",{attrs:{prop:"chn100k_ALL",label:t.$t("gene.table.chn100k_ALL")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stonebox",domProps:{innerHTML:t._s(t.secretNumber(e.row.chn100k_ALL))}})]}}])}),n("el-table-column",{attrs:{prop:"AC",label:t.$t("gene.table.AC"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stonebox",domProps:{innerHTML:t._s(e.row.AC)}})]}}])}),n("el-table-column",{attrs:{prop:"exonicFunc",label:t.$t("gene.table.exonicFunc")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-badge",{staticClass:"mark",staticStyle:{"margin-top":"15px","margin-right":"5px"},attrs:{"is-dot":"",type:"danger"===e.row.exonicFunColor?"danger":"success"===e.row.exonicFunColor?"success":"info"}}),t._v(t._s(e.row.exonicFuncValue)+" ")]}}])}),n("el-table-column",{attrs:{prop:"variation_type",label:t.$t("gene.table.variation_type"),width:"70"}}),n("el-table-column",{attrs:{prop:"geneDetail",label:t.$t("gene.table.geneDetail")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stonebox",domProps:{innerHTML:t._s(t.secretNumber(e.row.geneDetail,50))}})]}}])})],1)],1)],1)],1)]],2)])],1)},o=[],a=n("5530"),r=(n("159b"),n("4e82"),n("b680"),n("ac1f"),n("1276"),n("b0c0"),n("d3b7"),n("25f0"),n("cb29"),n("a15b"),n("2f62")),s=n("9ce4"),c=n("ca75"),l=n("5698"),h=n("313e"),u=n("03d6b"),d=n("6bf2"),f=n("90c5");n("817d");var p={name:"Position",components:{Nav:c["a"],VirtualScroll:d["a"]},directives:{drag:{bind:function(t,e,n){var i=0,o=0,a=!1;t.onmousedown=function(e){i=e.clientX,a=!0,o=0,t.style.cursor="move"},window.onmousemove=function(e){if(0!=a){var n=e.clientX;o=n-i,t.style.left=o+"px"}},t.onmouseup=function(){o<-20&&o>-300?(n.context.moveClick("10"),t.style.cursor="default"):o<-300&&(n.context.moveClick("50"),t.style.cursor="default"),o>300?(n.context.moveClick("-50"),t.style.cursor="default"):o>20&&o<300&&(n.context.moveClick("-10"),t.style.cursor="default"),a=!1,t.style.left="0px",t.style.cursor="default"}}}},data:function(){return{numberMap:{0:"&#59854;",1:"&#58670;",2:"&#59246;",3:"&#59537;",4:"&#57808;",5:"&#60146;",6:"&#60492;",7:"&#58149;",8:"&#58928;",9:"&#58397;"},virtualList:[],virtualListValue:void 0,geneData:{genomic:[{chrom:"",source:"",type:"",start:0,end:0,score:"",chain:"",cds_position:"",gene_id:"",parent:"",gene:"",id:1}],variation:[]},filterData:"",loading:!0,radio1:!1,containerWidth:0,minIdxSC:0,svg:"",svg2:"",input:"",checkboxGroup1:["pLoF","Missense","Synonymous","Other"],checkboxGroup3:["SNVs","Indels","SVs"],options:[{name:"pLoF",num:0},{name:"Missense",num:0},{name:"Synonymous",num:0},{name:"Other",num:0}],options2:[{name:"EXomes",num:0},{name:"Genomes",num:0}],options3:[{name:"SNVs",num:0},{name:"Indels",num:0},{name:"SVs",num:0}],tableData:[],tableSubData:[{NorthEast:"0",NorthChina:"0",EastChina:"0",CentralChina:"0",NorthWest:"0",SouthWest:"0",SouthChina:"0"}],colorActive:["rgb(245, 108, 108)","rgb(230, 162, 60)","rgb(103, 194, 58)","rgb(157, 157, 157)"],color:["rgb(253, 226, 226)","rgb(250, 236, 216)","rgb(208, 249, 188)","rgb(233, 233, 235)"],tableBgPos:"",mapkey:0,dataList:[],code:"4t5dac4nhxz41e6u",NorthChina:this.$t("variat.NorthChina"),NorthEast:this.$t("variat.NorthEast"),EastChina:this.$t("variat.EastChina"),CentralChina:this.$t("variat.CentralChina"),SouthChina:this.$t("variat.SouthChina"),SouthWest:this.$t("variat.SouthWest"),NorthWest:this.$t("variat.NorthWest")}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["position"])),{},{variation:function(){return this.filterData.variation}}),watch:{filterData:function(){var t=this;this.$nextTick((function(){var e=t.containerWidth/20*1.5,n=t.containerWidth-2*e,i=t.position.start-100<0?0:t.position.start-100,o=t.position.end+100,a=[i,o],r=o-i;function s(){var a=100,r=l["k"](".axis-container").select("svg");r.selectAll("*").remove(),r.attr("class","axis").attr("width",t.containerWidth).attr("height",a);var s=l["i"]().domain([i,o]).range([0,n]),c=l["a"]().scale(s).ticks(10).tickPadding(10);r.append("text").attr("x",0).attr("y",50).attr("fill","#409EFF").attr("font-size",18).text((function(){return"chr"+(23===t.position.chrom?"X":t.position.chrom)+"(GRCh38)"})),r.append("g").attr("transform",(function(){return"translate("+e+",50)"})).call(c)}function c(e,n){var o=t.containerWidth/20*1.5,a=t.containerWidth-2*o,s=[],h=[],u=0,d=0,f=[],p=null,v=null,m=0;t.svg=l["k"](".annotation-container").select("svg"),t.svg.selectAll("*").remove(),t.svg.style("overflow","visible"),t.annotationColor="#424242",t.filterData.genomic.forEach((function(t){"pseudogene"!==t["type"]&&"gene"!==t["type"]||s.push({start:(t["start"]-i)/r*a,end:(t["end"]-i)/r*a,gene:t["gene"]})})),s.sort((function(t,e){return t["start"]-e["start"]})),s.forEach((function(t,e){u=0,d=-1/0;for(var n=e;n<s.length;n++)u=s[n]["start"],u-d>120&&-1===f.indexOf(s[n]["gene"])&&(d=s[n]["end"],f.push(s[n]["gene"]),h.push(s[n]))})),h.forEach((function(o,s){s>0&&h[s]["start"]-120<h[s-1]["end"]&&(m+=1),p=null,v=null,t.filterData.genomic.forEach((function(n){"."===n["parent"]&&n["gene"]===o["gene"]&&("pseudogene"!==n["type"]&&"gene"!==n["type"]||(p=n["gene_id"],t.svg.append("line").attr("x1",(n["start"]-i)/r*a).attr("y1",13+15*m).attr("x2",(n["end"]-i)/r*a).attr("y2",13+15*m).attr("stroke","#dbdbdb").attr("stroke-width",2),t.svg.append("text").attr("x",(n["start"]-i)/r*a-10.5*n["gene"].length).attr("y",18+15*m).attr("fill","#409EFF").attr("font-size",14).attr("cursor","pointer").attr("geneId",n["gene_id"]).on("click",(function(){var t=l["k"](this).text(),n=l["k"](this).attr("geneId");e===t?c():c(t,n)})).text((function(){return n["gene"]})))),n["parent"]===p&&(v=n["gene_id"]),n["parent"]===v&&("CDS"===n["type"]&&t.svg.append("rect").attr("x",(n["start"]-i)/r*a).attr("y",6+15*m).attr("width",(n["end"]-n["start"])/r*a).attr("height",14).attr("fill","#424242"),"exon"===n["type"]&&t.svg.append("rect").attr("x",(n["start"]-i)/r*a).attr("y",10+15*m).attr("width",(n["end"]-n["start"])/r*a).attr("height",5).attr("fill","#424242").attr("class","UTR"))})),o["gene"]===e&&t.filterData.genomic.forEach((function(e){e["parent"]===n&&(m+=1,v=e["gene_id"],t.svg.append("line").attr("x1",(e["start"]-i)/r*a).attr("y1",13+15*m).attr("x2",(e["end"]-i)/r*a).attr("y2",13+15*m).attr("stroke","#c7def5").attr("stroke-width",2),t.svg.append("text").attr("x",(e["start"]-i)/r*a-8*e["gene_id"].length).attr("y",18+15*m).attr("fill","#409EFF").attr("font-size",12).attr("geneId",e["gene_id"]).text((function(){return e["gene_id"]}))),e["parent"]===v&&("CDS"===e["type"]&&t.svg.append("rect").attr("x",(e["start"]-i)/r*a).attr("y",6+15*m).attr("width",(e["end"]-e["start"])/r*a).attr("height",14).attr("fill","#81bcf9"),"exon"===e["type"]&&t.svg.append("rect").attr("x",(e["start"]-i)/r*a).attr("y",10+15*m).attr("width",(e["end"]-e["start"])/r*a).attr("height",5).attr("fill","#81bcf9").attr("class","UTR"))}))}));var g=16*(m+1);t.svg.attr("height",g).attr("width",a)}s(a),c()}))},variation:function(){var t=this,e=t.position.start-100<0?0:t.position.start-100,n=t.position.end+100,i=n-e;function o(){var n,o,a,r=t.containerWidth/20*1.5,s=t.containerWidth-2*r,c=100,l=document.getElementById("canvas");l.height=c,l.width=s;var h=l.getContext("2d");t.filterData.variation.forEach((function(r,c){a=(r["start"]+parseInt(r["end"]-r["start"]+3)/2-e)/i*s,-1!==r["func"].indexOf("ncRNA_exonic")||-1!==r["func"].indexOf("ncRNA_intronic")||-1!==r["func"].indexOf("intronic")||-1!==r["func"].indexOf("UTR5")||-1!==r["func"].indexOf("UTR3")||-1!==r["func"].indexOf("ncRNA_splicing")||-1!==r["func"].indexOf("UTR5;UTR3")||-1!==r["func"].indexOf("ncRNA_exonic;splicing")||-1!==r["func"].indexOf("ncRNA_UTR5")?(n=t.color[2],o=t.colorActive[2]):-1!==r["func"].indexOf("exonic")||-1!==r["func"].indexOf("splicing")||-1!==r["func"].indexOf("exonic;splicing")?(n=t.color[0],o=t.colorActive[0]):(n=t.color[3],o=t.colorActive[3]),"."!==r["chn100k_ALL"]&&(c<10?t.BezierEllipse1(h,a,50,parseInt(r["end"]-r["start"]+5),parseInt(35*r["chn100k_ALL"]),"#DCDFE6",o):t.BezierEllipse1(h,a,50,parseInt(r["end"]-r["start"]+5),parseInt(35*r["chn100k_ALL"]),"#C0C4CC",n))}))}function a(){t.tableData=[];var e=0,n=0,i=0,o=0,a=0,r=0,s=0,c=0,l=0;t.filterData.variation&&t.filterData.variation.forEach((function(h){var u=[],d="",f="";isNaN(h["gnomAD_exome_ALL"])||u.push("E"),isNaN(h["gnomAD_genome_ALL"])||u.push("G"),d=-1!==h["func"].indexOf("ncRNA_exonic")||-1!==h["func"].indexOf("ncRNA_intronic")||-1!==h["func"].indexOf("intronic")||-1!==h["func"].indexOf("UTR5")||-1!==h["func"].indexOf("UTR3")||-1!==h["func"].indexOf("ncRNA_splicing")||-1!==h["func"].indexOf("UTR5;UTR3")||-1!==h["func"].indexOf("ncRNA_exonic;splicing")||-1!==h["func"].indexOf("ncRNA_UTR5")?"success":-1!==h["func"].indexOf("exonic")||-1!==h["func"].indexOf("splicing")||-1!==h["func"].indexOf("exonic;splicing")?"danger":"info",f=-1!==h["exonicFunc"].indexOf(".")?h["func"]:h["func"]+":"+h["exonicFunc"],"splicing"===h["func"]||"exonic;splicing"===h["func"]||"stopgain"===h["exonicFunc"]||"frameshift insertion"===h["exonicFunc"]||"frameshift deletion"===h["exonicFunc"]||"startloss"===h["exonicFunc"]||"stoploss"===h["exonicFunc"]?e+=1:"nonsynonymous SNV"===h["exonicFunc"]||"nonframeshift deletion"===h["exonicFunc"]||"nonframeshift insertion"===h["exonicFunc"]?n+=1:"synonymous SNV"===h["exonicFunc"]||"unknown"===h["exonicFunc"]?i+=1:"splicing"!==h["func"]&&"exonic;splicing"!==h["func"]&&"exonic"!==h["func"]&&(o+=1),-1!==h["variation_type"].indexOf("exome")&&(a+=1),-1!==h["variation_type"].indexOf("genome")&&(r+=1),-1!==h["variation_type"].indexOf("SNV")&&(s+=1),-1!==h["variation_type"].indexOf("INDEL")&&(c+=1),-1!==h["variation_type"].indexOf("SV")&&(l+=1),t.tableData.push({id:h["id"],variatiId:h["uu_id"],chrom:h["chrom"],rsid:h["RSID"],exonicFunColor:d,exonicFuncValue:f,variation_type:h["variation_type"],dbsnp:h["AF"],chn100k_ALL:parseFloat(100*h["chn100k_ALL"]).toFixed(4)+"%",AC:"0.0"===h["chn100k_ALL"]?1:Math.ceil(25169*h["chn100k_ALL"]*2),gene:h["gene"],geneDetail:h["geneDetail"],chn100k_NE:h["chn100k_NE"],chn100k_N:h["chn100k_N"],chn100k_E:h["chn100k_E"],chn100k_C:h["chn100k_C"],chn100k_NW:h["chn100k_NW"],chn100k_SW:h["chn100k_SW"],chn100k_S:h["chn100k_S"]})})),t.options=[{name:"pLoF",num:e},{name:"Missense",num:n},{name:"Synonymous",num:i},{name:"Other",num:o}],t.options2=[{name:"EXomes",num:a},{name:"Genomes",num:r}],t.options3=[{name:"SNVs",num:s},{name:"Indels",num:c},{name:"SVs",num:l}]}t.filterData.variation&&o(),a()},input:function(){this.dataFiter()}},created:function(){var t=this;if(this.position.value){var e={start:this.position.start,end:this.position.end,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(s["a"])(e).then((function(n){n.variation&&(n.variation=JSON.parse(Object(f["a"])(n.variation,Object(f["a"])(n.key,t.code)))),t.geneData=n,t.filterData=Object.assign({},n),t.containerWidth=parseInt(l["k"](".axis-container").style("width")),t.position.value="chr"+(23===t.position.chrom?"X":t.position.chrom)+":"+e.start+"-"+e.end,t.position.label="chr"+(23===t.position.chrom?"X":t.position.chrom)+":"+e.start+"-"+e.end,t.loading=!1}))}},mounted:function(){var t=this;if(this.$refs.filterTable){var e=document.getElementById("svg-drag");window.addEventListener&&e.addEventListener("DOMMouseScroll",(function(e){var n=e||window.event,i=-n.detail/3;i>=1&&t.zoomClick("3"),i<=-1&&t.zoomClick("0.3333"),e.preventDefault()}),!1),e.onmousewheel=function(e){var n=e||window.event,i=n.wheelDelta/120;return i>=1&&t.zoomClick("3"),i<=-1&&t.zoomClick("0.3333"),!1}}this.initMap(),this.initChart()},methods:{zoomClick:function(t){var e=this;this.loading=!0;var n=parseInt((this.position.end-this.position.start)/2)+this.position.start,i=parseInt((this.position.end-this.position.start)*t/2);if(i>500){var o=n-i<=0?0:n-i,a=n+i,r={start:o,end:a,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(s["a"])(r).then((function(t){t.variation&&(t.variation=JSON.parse(Object(f["a"])(t.variation,Object(f["a"])(t.key,e.code)))),e.geneData=t,e.filterData=Object.assign({},t),e.containerWidth=parseInt(l["k"](".axis-container").style("width")),e.position.start=r.start,e.position.end=r.end,e.position.value="chr"+(23===e.position.chrom?"X":e.position.chrom)+"："+r.start+"-"+r.end,e.position.label="chr"+(23===e.position.chrom?"X":e.position.chrom)+"："+r.start+"-"+r.end,e.$store.dispatch("variations/positionSearch",e.position),e.loading=!1}))}else this.loading=!1},moveClick:function(t){var e=this;this.loading=!0;var n=parseInt((this.position.end-this.position.start)/2),i=parseInt((this.position.end-this.position.start)/2+this.position.start+parseInt(t)*n/100),o=i-n<=0?0:i-n,a=o<=0?2*n:i+n;if(this.position.start>0||t>0){var r={start:o,end:a,chrom:"x"===this.position.chrom?23:this.position.chrom};Object(s["a"])(r).then((function(t){t.variation&&(t.variation=JSON.parse(Object(f["a"])(t.variation,Object(f["a"])(t.key,e.code)))),e.geneData=t,e.filterData=Object.assign({},t),e.containerWidth=parseInt(l["k"](".axis-container").style("width")),e.position.start=r.start,e.position.end=r.end,e.position.value="chr"+(23===e.position.chrom?"X":e.position.chrom)+"："+r.start+"-"+r.end,e.position.label="chr"+(23===e.position.chrom?"X":e.position.chrom)+"："+r.start+"-"+r.end,e.$store.dispatch("variations/positionSearch",e.position),e.loading=!1}))}else this.loading=!1},filterHandler:function(t,e,n){var i=n["property"];return e[i]===t},handleCheckedOptionsChangeOne:function(t){this.dataFiter()},handleCheckedOptionsChangeTwo:function(t){this.dataFiter()},handleCheckedOptionsChangeThree:function(t){this.dataFiter()},variationClick:function(t){var e=this;this.dom=this.$refs.filterTable.bodyWrapper;var n,i,o,a=this.dom.clientHeight,r=this.dom.scrollHeight,s=r-a,c=e.position.start-100<0?0:e.position.start-100,l=e.position.end+100,h=l-c,u=e.containerWidth/20*1.5,d=e.containerWidth-2*u,f=1/0,p=0,v=document.getElementById("canvas"),m=v.getContext("2d");m.clearRect(0,0,d,100),this.filterData.variation.forEach((function(n,i){o=(n["start"]+parseInt(n["end"]-n["start"]+5)/2-c)/h*d,Math.abs(t.x-u-20-o)<f&&(f=Math.abs(t.x-u-20-o),e.minIdxSC=i,e.minIdxSC<5?(p=0,e.minIdxSC=5):e.minIdxSC>e.filterData.variation.length-6?(p=e.filterData.variation.length-1,e.minIdxSC=e.filterData.variation.length-5):p=e.minIdxSC)})),this.filterData.variation.forEach((function(t,a){o=(t["start"]+parseInt(t["end"]-t["start"]+3)/2-c)/h*d,-1!==t["func"].indexOf("ncRNA_exonic")||-1!==t["func"].indexOf("ncRNA_intronic")||-1!==t["func"].indexOf("intronic")||-1!==t["func"].indexOf("UTR5")||-1!==t["func"].indexOf("UTR3")||-1!==t["func"].indexOf("ncRNA_splicing")||-1!==t["func"].indexOf("UTR5;UTR3")||-1!==t["func"].indexOf("ncRNA_exonic;splicing")||-1!==t["func"].indexOf("ncRNA_UTR5")?(n=e.color[2],i=e.colorActive[2]):-1!==t["func"].indexOf("exonic")||-1!==t["func"].indexOf("splicing")||-1!==t["func"].indexOf("exonic;splicing")?(n=e.color[0],i=e.colorActive[0]):(n=e.color[3],i=e.colorActive[3]),"."!==t["chn100k_ALL"]&&(e.minIdxSC-a<6&&e.minIdxSC-a>-6?e.BezierEllipse1(m,o,50,parseInt(t["end"]-t["start"]+5),parseInt(35*t["chn100k_ALL"]),"#DCDFE6",i):e.BezierEllipse1(m,o,50,parseInt(t["end"]-t["start"]+5),parseInt(35*t["chn100k_ALL"]),"#C0C4CC",n))})),this.dom.scrollTop=s*p/(this.filterData.variation.length-1)},geneListClick:function(t,e){if("gene"===this.geneList[e].type||"pseudogene"===this.geneList[e].type){var n=this.$router.resolve({name:"Gene"});this.$store.dispatch("variations/geneSearch",{chrom:parseInt(this.geneList[e].chrom.split(".")[0].split("_")[1]),value:this.geneList[e].gene,label:this.geneList[e].gene,type:this.geneList[e].type,start:parseInt(this.geneList[e].start)-1,end:parseInt(this.geneList[e].end)+1}),window.open(n.href,"_blank")}},dataFiter:function(){var t,e=this,n=[];e.filterData.variation=[],this.input?e.geneData.variation.forEach((function(i){if(-1!==i["uuId"].indexOf(e.input)){t=0;while(t<e.checkboxGroup1.length)("pLoF"!==e.checkboxGroup1[t]||"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"stopgain"!==i["exonicFunc"]&&"frameshift insertion"!==i["exonicFunc"]&&"frameshift deletion"!==i["exonicFunc"]&&"startloss"!==i["exonicFunc"]&&"stoploss"!==i["exonicFunc"])&&("Missense"!==e.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"nonsynonymous SNV"!==i["exonicFunc"]&&"nonframeshift deletion"!==i["exonicFunc"]&&"nonframeshift insertion"!==i["exonicFunc"])&&("Synonymous"!==e.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"synonymous SNV"!==i["exonicFunc"]&&"unknown"!==i["exonicFunc"])?"Other"===e.checkboxGroup1[t]&&"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"exonic"!==i["func"]&&n.push(i):n.push(i),t++}})):e.geneData.variation.forEach((function(i){t=0;while(t<e.checkboxGroup1.length)("pLoF"!==e.checkboxGroup1[t]||"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"stopgain"!==i["exonicFunc"]&&"frameshift insertion"!==i["exonicFunc"]&&"frameshift deletion"!==i["exonicFunc"]&&"startloss"!==i["exonicFunc"]&&"stoploss"!==i["exonicFunc"])&&("Missense"!==e.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"nonsynonymous SNV"!==i["exonicFunc"]&&"nonframeshift deletion"!==i["exonicFunc"]&&"nonframeshift insertion"!==i["exonicFunc"])&&("Synonymous"!==e.checkboxGroup1[t]||"splicing"===i["func"]||"exonic;splicing"===i["func"]||"synonymous SNV"!==i["exonicFunc"]&&"unknown"!==i["exonicFunc"])?"Other"===e.checkboxGroup1[t]&&"splicing"!==i["func"]&&"exonic;splicing"!==i["func"]&&"exonic"!==i["func"]&&n.push(i):n.push(i),t++})),n.forEach((function(t){for(var n=0;n<e.checkboxGroup3.length;n++)"SNVs"===e.checkboxGroup3[n]&&-1!==t["variation_type"].indexOf("SNV")&&e.filterData.variation.push(t),"Indels"===e.checkboxGroup3[n]&&-1!==t["variation_type"].indexOf("INDEL")&&e.filterData.variation.push(t),"SVs"===e.checkboxGroup3[n]&&-1!==t["variation_type"].indexOf("SV")&&e.filterData.variation.push(t)}))},mergeProvinces:function(t,e,n){for(var i=t.features,o=[],a=[],r=0;r<e.length;r++){for(var s=[],c=[],l=0;l<e[r].length;l++)for(var h=0;h<i.length;h++)if(i[h].properties.name==e[r][l]){if(i[h].geometry.coordinates[0].constructor==String)for(var u=0;u<i[h].geometry.coordinates.length;u++)s.push(i[h].geometry.coordinates[u]);else if(i[h].geometry.coordinates[0].constructor==Array)for(var d=0;d<i[h].geometry.coordinates.length;d++)for(var f=0;f<i[h].geometry.coordinates[d].length;f++)s.push(i[h].geometry.coordinates[d][f]);if(i[h].geometry.encodeOffsets[0].constructor==String)c.push(i[h].geometry.encodeOffsets);else if(i[h].geometry.encodeOffsets[0].constructor==Array)for(d=0;d<i[h].geometry.encodeOffsets.length;d++)if(i[h].geometry.encodeOffsets[d][0].constructor==Array)for(var p=0;p<i[h].geometry.encodeOffsets[d].length;p++)c.push(i[h].geometry.encodeOffsets[d][p]);else c.push(i[h].geometry.encodeOffsets[d]);break}o.push(s),a.push(c)}i=[];for(var v=0;v<e.length;v++){var m={id:i.length.toString(),type:"FeatureCollection",geometry:{type:"Polygon",coordinates:o[v],encodeOffsets:a[v]},properties:{name:n.name[v]||"",childNum:o[v].length}};n.cp[v]&&(m.properties.cp=n.cp[v]),i.push(m)}t.features=i},initMap:function(){var t={names:[["北京","天津","河北","山西","内蒙古"],["黑龙江","吉林","辽宁"],["山东","江苏","安徽","江西","浙江","福建","上海","台湾"],["河南","湖北","湖南"],["广东","广西","海南","香港","澳门"],["重庆","四川","云南","西藏","贵州"],["陕西","甘肃","青海","宁夏","新疆"]],properties:{name:[this.NorthChina,this.NorthEast,this.EastChina,this.CentralChina,this.SouthChina,this.SouthWest,this.NorthWest],cp:[[116.24,39.54],[126.32,43.5],[121.28,31.13],[114.2,30.32],[113.15,23.08],[104.04,30.39],[103.49,36.03]]}};u.features&&u.features.length>8&&this.mergeProvinces(u,t.names,t.properties),h["registerMap"]("china",u)},initChart:function(t){var e=this,n=document.getElementById("mapChart"),i=document.body.clientWidth;n.style.height=460/1903*i+"px";var o=h["init"](n),a={tooltip:{trigger:"item",formatter:function(t){return t.name}},visualMap:{type:"piecewise",left:"left",top:"top",splitNumber:4,pieces:[{min:.05,max:1,label:"5%-100%",color:"#f96262"},{min:.01,max:.05,label:"1%-5%",color:"#f5c63a"},{min:.005,max:.01,label:"0.5%-1%",color:"#48bd48"},{min:0,max:.005,label:"0%-0.5%",color:"#40a1e5"},{value:0,label:"0%",color:"#eeeeee"}],show:!0},geo:{map:"china",roam:!1,center:[105,35],zoom:1,label:{normal:{show:!0,fontSize:"12",color:"rgba(0,0,0,0.7)"},emphasis:{textStyle:{color:"#fff"}}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"#F3B329",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},series:[{name:"变异数量",type:"map",geoIndex:0,data:t}]};o.setOption(a,!0),o.on("click",(function(t){t.name===e.NorthEast&&(e.tableBgPos="chn100k_NE",e.dataList=[{name:e.NorthEast,value:.004}]),t.name===e.NorthChina&&(e.tableBgPos="chn100k_N",e.dataList=[{name:e.NorthChina,value:.004}]),t.name===e.EastChina&&(e.tableBgPos="chn100k_E",e.dataList=[{name:e.EastChina,value:.004}]),t.name===e.CentralChina&&(e.tableBgPos="chn100k_C",e.dataList=[{name:e.CentralChina,value:.004}]),t.name===e.SouthChina&&(e.tableBgPos="chn100k_S",e.dataList=[{name:e.SouthChina,value:.004}]),t.name===e.NorthWest&&(e.tableBgPos="chn100k_NW",e.dataList=[{name:e.NorthWest,value:.004}]),t.name===e.SouthWest&&(e.tableBgPos="chn100k_SW",e.dataList=[{name:e.SouthWest,value:.004}]),o.clear(),o.off(),e.initChart(e.dataList),e.$refs.filterTable.setCurrentRow()})),this.$nextTick((function(){o.resize()}))},tableCell:function(t,e,n,i){this.dataList=[{name:this.NorthEast,value:t.chn100k_NE},{name:this.NorthChina,value:t.chn100k_N},{name:this.SouthChina,value:t.chn100k_S},{name:this.EastChina,value:t.chn100k_E},{name:this.CentralChina,value:t.chn100k_C},{name:this.SouthWest,value:t.chn100k_SW},{name:this.NorthWest,value:t.chn100k_NW}],this.tableSubData=[{NorthEast:t.chn100k_NE,NorthChina:t.chn100k_N,EastChina:t.chn100k_E,CentralChina:t.chn100k_C,NorthWest:t.chn100k_NW,SouthWest:t.chn100k_SW,SouthChina:t.chn100k_S}],""!==this.tableBgPos&&(this.tableBgPos=""),this.initChart(this.dataList)},TableRowStyle:function(t){var e={};return 0<t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.005&&(e.background="rgba(123,189,235,"+1e3*t.row[this.tableBgPos]+")"),.005<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.01&&(e.background="rgba(111,215,111,"+1e3*t.row[this.tableBgPos]+")"),.01<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<.05&&(e.background="rgba(245,198,58,"+1e3*t.row[this.tableBgPos]+")"),.05<=t.row[this.tableBgPos]&&t.row[this.tableBgPos]<1&&(e.background="rgba(245,138,138,"+1e3*t.row[this.tableBgPos]+")"),e},onReset:function(){""!==this.tableBgPos&&(this.tableBgPos=""),this.dataList.length>0&&(this.dataList=[],this.$refs.filterTable.setCurrentRow(),this.initChart(this.dataList)),this.tableSubData=[{NorthEast:0,NorthChina:0,EastChina:0,CentralChina:0,NorthWest:0,SouthWest:0,SouthChina:0}]},BezierEllipse1:function(t,e,n,i,o,a,r){t.save();var s=i>o?i:o,c=i/s,l=o/s;t.scale(c,l),t.beginPath(),t.moveTo((e+i)/c,n/l),t.arc(e/c,n/l,s,0,2*Math.PI),t.closePath(),t.strokeStyle=a,t.fillStyle=r,t.fill(),t.stroke(),t.restore()},secretNumber:function(t,e){e||(e=20);var n=t,i=null;if(t)if(n.length>e){n=n.substring(0,e),i=n.split("");for(var o=0;o<i.length;o++)this.numberMap[i[o]]&&(i[o]=this.numberMap[i[o]]);n=i.join(""),n+="..."}else{i=n.split("");for(o=0;o<i.length;o++)this.numberMap[i[o]]&&(i[o]=this.numberMap[i[o]]);n=i.join("")}else n=".";return n}}},v=p,m=(n("2eb8"),n("b742"),n("2877")),g=Object(m["a"])(v,i,o,!1,null,"f6691ee6",null);e["default"]=g.exports},"4e82":function(t,e,n){"use strict";var i=n("23e7"),o=n("1c0b"),a=n("7b0b"),r=n("50c4"),s=n("d039"),c=n("addb"),l=n("a640"),h=n("04d1"),u=n("d998"),d=n("2d00"),f=n("512ce"),p=[],v=p.sort,m=s((function(){p.sort(void 0)})),g=s((function(){p.sort(null)})),b=l("sort"),x=!s((function(){if(d)return d<70;if(!(h&&h>3)){if(u)return!0;if(f)return f<603;var t,e,n,i,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)p.push({k:e+i,v:n})}for(p.sort((function(t,e){return e.v-t.v})),i=0;i<p.length;i++)e=p[i].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}})),y=m||!g||!b||!x,_=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:String(e)>String(n)?1:-1}};i({target:"Array",proto:!0,forced:y},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(x)return void 0===t?v.call(e):v.call(e,t);var n,i,s=[],l=r(e.length);for(i=0;i<l;i++)i in e&&s.push(e[i]);s=c(s,_(t)),n=s.length,i=0;while(i<n)e[i]=s[i++];while(i<l)delete e[i++];return e}})},"512ce":function(t,e,n){var i=n("342f"),o=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},"6bf2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return It}));var i=n("5c96");function o(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,a,r,s=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(h){l=!0,o=h}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(l)throw o}}return s}}function a(t,e){return c(t)||o(t,e)||h(t,e)||f()}function r(t){return s(t)||l(t)||h(t)||d()}function s(t){if(Array.isArray(t))return u(t)}function c(t){if(Array.isArray(t))return t}function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function h(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var v=p,m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},g="object"==typeof m&&m&&m.Object===Object&&m,b=g,x="object"==typeof self&&self&&self.Object===Object&&self,y=b||x||Function("return this")(),_=y,w=function(){return _.Date.now()},C=w,k=/\s/;function S(t){var e=t.length;while(e--&&k.test(t.charAt(e)));return e}var E=S,O=/^\s+/;function T(t){return t?t.slice(0,E(t)+1).replace(O,""):t}var N=T,A=_.Symbol,$=A,L=Object.prototype,D=L.hasOwnProperty,R=L.toString,I=$?$.toStringTag:void 0;function F(t){var e=D.call(t,I),n=t[I];try{t[I]=void 0;var i=!0}catch(a){}var o=R.call(t);return i&&(e?t[I]=n:delete t[I]),o}var B=F,W=Object.prototype,z=W.toString;function P(t){return z.call(t)}var j=P,V="[object Null]",M="[object Undefined]",U=$?$.toStringTag:void 0;function G(t){return null==t?void 0===t?M:V:U&&U in Object(t)?B(t):j(t)}var H=G;function X(t){return null!=t&&"object"==typeof t}var q=X,J="[object Symbol]";function K(t){return"symbol"==typeof t||q(t)&&H(t)==J}var Y=K,Z=NaN,Q=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,et=/^0o[0-7]+$/i,nt=parseInt;function it(t){if("number"==typeof t)return t;if(Y(t))return Z;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=N(t);var n=tt.test(t);return n||et.test(t)?nt(t.slice(2),n?2:8):Q.test(t)?Z:+t}var ot=it,at="Expected a function",rt=Math.max,st=Math.min;function ct(t,e,n){var i,o,a,r,s,c,l=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError(at);function f(e){var n=i,a=o;return i=o=void 0,l=e,r=t.apply(a,n),r}function p(t){return l=t,s=setTimeout(b,e),h?f(t):r}function m(t){var n=t-c,i=t-l,o=e-n;return u?st(o,a-i):o}function g(t){var n=t-c,i=t-l;return void 0===c||n>=e||n<0||u&&i>=a}function b(){var t=C();if(g(t))return x(t);s=setTimeout(b,m(t))}function x(t){return s=void 0,d&&i?f(t):(i=o=void 0,r)}function y(){void 0!==s&&clearTimeout(s),l=0,i=c=o=s=void 0}function _(){return void 0===s?r:x(C())}function w(){var t=C(),n=g(t);if(i=arguments,o=this,c=t,n){if(void 0===s)return p(c);if(u)return clearTimeout(s),s=setTimeout(b,e),f(c)}return void 0===s&&(s=setTimeout(b,e)),r}return e=ot(e)||0,v(n)&&(h=!!n.leading,u="maxWait"in n,a=u?rt(ot(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),w.cancel=y,w.flush=_,w}var lt=ct,ht="Expected a function";function ut(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(ht);return v(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),lt(t,e,{leading:i,maxWait:e,trailing:o})}var dt=ut;function ft(t){var e=window.getComputedStyle(t,null),n=["auto","scroll"];return n.includes(e.overflow)||n.includes(e["overflow-y"])}function pt(t){var e=t;while(e){if([window,document,document.documentElement].includes(e))return window;if(ft(e))return e;e=e.parentNode}return e||window}function vt(t){return t===window?window.pageYOffset:t.scrollTop}function mt(t){return t===window?window.innerHeight:t.offsetHeight}function gt(t,e){t===window?window.scroll(0,e):t.scrollTop=e}function bt(t){return"undefined"===typeof t||null===t}var xt=[".el-table__body-wrapper",".el-table__fixed-right .el-table__fixed-body-wrapper",".el-table__fixed .el-table__fixed-body-wrapper"],yt=0,_t={name:"el-table-virtual-scroll",props:{data:{type:Array,required:!0},itemSize:{type:Number,default:60},scrollBox:{type:String},buffer:{type:Number,default:200},keyProp:{type:String,default:"id"},throttleTime:{type:Number,default:10},dynamic:{type:Boolean,default:!0},virtualized:{type:Boolean,default:!0},rowSpanKey:{type:Function}},provide:function(){return{virtualScroll:this}},data:function(){return{sizes:{},start:0,end:void 0,curRow:null,isExpanding:!1,columnVms:[],isHideAppend:!1}},computed:{offsetMap:function(t){var e=t.keyProp,n=t.itemSize,i=t.sizes,o=t.data;if(!this.dynamic)return{};for(var a={},r=0,s=0;s<o.length;s++){var c=o[s][e];a[c]=r;var l=i[c],h="number"===typeof l?l:n;r+=h}return a}},methods:{initData:function(){var t=this;if(this.renderData=[],this.top=void 0,this.bottom=void 0,this.start=0,this.end=void 0,this.isInnerScroll=!1,this.toTop=0,this.elTable=this.$children[0],!this.elTable||"ElTable"!==this.elTable.$options.name)throw new Error("el-table-virtual-column 组件插槽内必须是el-table");this.scroller=this.getScroller(),this.setToTop(),setTimeout((function(){t.handleScroll()}),100),this.onScroll=this.throttleTime?dt(this.handleScroll,this.throttleTime):this.handleScroll,this.scroller.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onScroll),this.bindTableExpandEvent()},getScroller:function(){var t;if(this.scrollBox){if("window"===this.scrollBox||this.scrollBox===window)return window;if(t=document.querySelector(this.scrollBox),!t)throw new Error(" scrollBox prop: '".concat(this.scrollBox,"' is not a valid selector"));return ft(t)||console.warn("Warning! scrollBox prop: '".concat(this.scrollBox,"' is not a scroll element")),t}return this.elTable&&this.elTable.height?(this.isInnerScroll=!0,this.$el.querySelector(".el-table__body-wrapper")):pt(this.$el)},setToTop:function(){this.isInnerScroll?this.toTop=0:this.toTop=this.$el.getBoundingClientRect().top-(this.scroller===window?0:this.scroller.getBoundingClientRect().top)+vt(this.scroller)},handleScroll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.virtualized&&(this.removeHoverRows(),this.updateSizes(),this.calcRenderData(),this.calcPosition(),t&&this.updatePosition(),this.$emit("change",this.renderData,this.start,this.end),this.setRowsExpanded())},removeHoverRows:function(){var t=this.$el.querySelectorAll(".el-table__row.hover-row");t.length>1&&Array.from(t).forEach((function(t){t.classList.remove("hover-row")}))},updateSizes:function(){var t=this;if(this.dynamic){var e=this.$el.querySelectorAll(".el-table__body > tbody > .el-table__row"),n=!1;e[0]&&e[0].classList.contains("el-table__row--level-0")&&(n=!0,e=this.$el.querySelectorAll(".el-table__body > tbody > .el-table__row.el-table__row--level-0")),Array.from(e).forEach((function(e,i){var o=t.renderData[i];if(o){var a=e.offsetHeight;if(e.classList.contains("expanded")&&(a+=e.nextSibling.offsetHeight),n){var r=e.nextSibling;while(r&&"TR"===r.tagName&&!r.classList.contains("el-table__row--level-0"))a+=r.offsetHeight,r=r.nextSibling}var s=o[t.keyProp];t.sizes[s]!==a&&t.$set(t.sizes,s,a)}}))}},getItemOffsetTop:function(t){if(!this.dynamic)return this.itemSize*t;var e=this.data[t];return e&&this.offsetMap[e[this.keyProp]]||0},getItemSize:function(t){if(t<=-1)return 0;var e=this.data[t];if(e){var n=e[this.keyProp];return this.sizes[n]||this.itemSize}return this.itemSize},calcRenderData:function(){var t,e,n=this.scroller,i=this.data,o=this.buffer,r=vt(n)-o-this.toTop,s=vt(n)+mt(n)+o-this.toTop;if(this.dynamic){var c=0,l=i.length-1,h=0;while(c<=l){h=Math.floor((c+l)/2);var u=this.getItemOffsetTop(h);if(u<r){var d=this.getItemOffsetTop(h+1);if(d>r)break;c=h+1}else l=h-1}t=h,e=i.length-1;for(var f=t+1;f<i.length;f++){var p=this.getItemOffsetTop(f);if(p>=s){e=f;break}}}else t=r<=0?0:Math.floor(r/this.itemSize),e=s<=0?0:Math.ceil(s/this.itemSize);t%2&&(t-=1);var v=this.calcRenderSpanData(t,e),m=a(v,2),g=m[0],b=m[1];this.top=r,this.bottom=s,this.start=g,this.end=b,this.renderData=i.slice(g,b+1)},calcRenderSpanData:function(t,e){if("function"!==typeof this.rowSpanKey)return[t,e];var n;while(t>0){var i=this.data[t],o=this.rowSpanKey(i,t);if(bt(o))break;if(!bt(n)&&n!==o){t++;break}n=o,t--}var a=this.data.length;n=void 0;while(e<a){var r=this.data[e],s=this.rowSpanKey(r,e);if(!s)break;if(n&&n!==s){e--;break}n=s,e++}return[t,e]},calcPosition:function(){var t=this,e=this.data.length-1,n=this.getItemOffsetTop(e)+this.getItemSize(e),i=this.getItemOffsetTop(this.start);xt.forEach((function(e){var o=t.$el.querySelector(e);if(o){if(!o.wrapEl){var a=document.createElement("div"),r=document.createElement("div");a.appendChild(r),r.appendChild(o.children[0]),o.insertBefore(a,o.firstChild),o.wrapEl=a,o.innerEl=r}o.wrapEl&&(o.wrapEl.style.height=n+"px",o.innerEl.style.transform="translateY(".concat(i,"px)"))}}))},updatePosition:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer&&clearTimeout(t.timer),t.handleScroll(!1)}),this.throttleTime+10)},renderAllData:function(){var t=this;this.renderData=this.data,this.$emit("change",this.data,0,this.data.length-1),this.$nextTick((function(){xt.forEach((function(e){var n=t.$el.querySelector(e);n&&n.wrapEl&&(n.wrapEl.style.height="auto",n.innerEl.style.transform="translateY(".concat(0,"px)"))}))}))},update:function(){this.setToTop(),this.handleScroll()},scrollTo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.data[t];i&&this.scroller&&(this.updateSizes(),this.calcRenderData(),this.$nextTick((function(){var i=e.getItemOffsetTop(t);gt(e.scroller,i),n||setTimeout((function(){e.scrollTo(t,!0)}),50)})))},reset:function(){this.sizes={},this.scrollTo(0,!1)},addColumn:function(t){this.columnVms.push(t)},removeColumn:function(t){this.columnVms=this.columnVms.filter((function(e){return e!==t}))},checkAll:function(t){var e=this,n=[];this.data.forEach((function(i){i.$v_checked&&n.push(i),e.checkRow(i,t,!1)})),this.emitSelectionChange(n),!1===t&&(yt=0)},checkRow:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.$v_checked!==e&&(this.$set(t,"$v_checked",e),this.$set(t,"$v_checkedOrder",e?yt++:void 0),n&&this.emitSelectionChange(e?[]:[t]))},emitSelectionChange:function(t){var e=this.data.filter((function(t){return t.$v_checked})).sort((function(t,e){return t.$v_checkedOrder-e.$v_checkedOrder}));this.$emit("selection-change",e,t)},clearSelection:function(){this.checkAll(!1),this.columnVms.forEach((function(t){return t.syncCheckStatus()}))},toggleRowSelection:function(t,e){var n="boolean"===typeof e?e:!t.$v_checked;this.checkRow(t,n),this.columnVms.forEach((function(t){return t.syncCheckStatus()}))},bindTableExpandEvent:function(){var t=this;this.isExpandType&&this.elTable.$on("expand-change",(function(e,n){t.$set(e,"$v_expanded",n.includes(e))}))},setRowsExpanded:function(){var t=this;this.isExpandType&&this.$nextTick((function(){var e=t.renderData.filter((function(t){return t.$v_expanded}));0!==e.length&&(e.forEach((function(e){t.elTable.toggleRowExpansion(e,!0)})),t.isExpanding=!0,setTimeout((function(){t.isExpanding=!1}),10))}))},toggleRowExpansion:function(t,e){var n="boolean"===typeof e;this.$set(t,"$v_expanded",n?e:!t.$v_expanded),this.renderData.includes(t)&&this.elTable.toggleRowExpansion(t,e)},setCurrentRow:function(t){this.curRow=t,this.$emit("current-change",t)},updateData:function(t){this.$emit("update:data",t)},doUpdate:function(){var t=this;this.hasDoUpdate||this.scroller&&(this.isHideAppend=!0,this.update(),this.hasDoUpdate=!0,this.$nextTick((function(){t.hasDoUpdate=!1,t.isHideAppend=!1})))}},watch:{data:function(){this.virtualized?this.doUpdate():this.renderAllData(),this.columnVms.forEach((function(t){return t.syncCheckStatus()}))},virtualized:{immediate:!0,handler:function(t){t?this.doUpdate():this.renderAllData()}}},created:function(){var t=this;this.$nextTick((function(){t.initData()}))},beforeDestroy:function(){this.scroller&&(this.scroller.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll))}};function wt(t,e,n,i,o,a,r,s,c,l){"boolean"!==typeof r&&(c=s,s=r,r=!1);const h="function"===typeof n?n.options:n;let u;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),i&&(h._scopeId=i),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=u):e&&(u=r?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),u)if(h.functional){const t=h.render;h.render=function(e,n){return u.call(n),t(e,n)}}else{const t=h.beforeCreate;h.beforeCreate=t?[].concat(t,u):[u]}return n}const Ct="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function kt(t){return(t,e)=>Ot(t,e)}let St;const Et={};function Ot(t,e){const n=Ct?e.media||"default":t,i=Et[n]||(Et[n]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===St&&(St=document.head||document.getElementsByTagName("head")[0]),St.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const t=i.ids.size-1,e=document.createTextNode(n),o=i.element.childNodes;o[t]&&i.element.removeChild(o[t]),o.length?i.element.insertBefore(e,o[t]):i.element.appendChild(e)}}}var Tt=_t,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-table-virtual-scroll",class:[t.isExpanding?"is-expanding":"",t.isHideAppend?"hide-append":""]},[t._t("default")],2)},At=[];Nt._withStripped=!0;var $t=function(t){t&&t("data-v-200c2e98_0",{source:".is-expanding[data-v-200c2e98] :deep(.el-table__expand-icon) {\n  transition: none;\n}\n.hide-append[data-v-200c2e98] :deep(.el-table__append-wrapper) {\n  display: none;\n}\n",map:{version:3,sources:["el-table-virtual-scroll.vue"],names:[],mappings:"AAAA;EACE,gBAAgB;AAClB;AACA;EACE,aAAa;AACf",file:"el-table-virtual-scroll.vue",sourcesContent:[".is-expanding :deep(.el-table__expand-icon) {\n  transition: none;\n}\n.hide-append :deep(.el-table__append-wrapper) {\n  display: none;\n}\n"]},media:void 0})},Lt="data-v-200c2e98",Dt=void 0,Rt=!1,It=wt({render:Nt,staticRenderFns:At},$t,Tt,Lt,Rt,Dt,!1,kt,void 0,void 0),Ft=(i["TableColumn"],i["Checkbox"],i["Radio"],function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table-column",t._g(t._b({attrs:{"class-name":t.isTree?"el-table__row--level":""},scopedSlots:t._u([{key:"header",fn:function(e){return[t.$scopedSlots["header"]?t._t("header",null,null,e):["v-selection"===e.column.type?n("el-checkbox",{attrs:{indeterminate:t.isCheckedImn},on:{change:t.onCheckAllRows},model:{value:t.isCheckedAll,callback:function(e){t.isCheckedAll=e},expression:"isCheckedAll"}}):[t._v("\n        "+t._s(e.column.label)+"\n      ")]]]}},{key:"default",fn:function(e){return[e.column&&"v-tree"===e.column.type?[n("span",{staticClass:"el-table__indent",style:{paddingLeft:(e.row.$level-1)*t.indent+"px"}}),t._v(" "),!1!==e.row.$v_hasChildren?n("div",{staticClass:"el-table__expand-icon",class:e.row.$v_expanded?"el-table__expand-icon--expanded":"",on:{click:function(n){return t.onTreeNodeExpand(e.row)}}},[e.row.$v_loading?n("i",{staticClass:"el-icon-loading"}):n("i",{staticClass:"el-icon-arrow-right"})]):n("span",{staticClass:"el-table__placeholder"})]:t._e(),t._v(" "),t.$scopedSlots["default"]?t._t("default",null,null,e):["v-selection"===e.column.type?n("el-checkbox",{attrs:{value:e.row.$v_checked},on:{change:function(n){return t.onCheckRow(e.row,!e.row.$v_checked)}}}):t._e(),t._v(" "),"v-radio"===e.column.type?n("el-radio",{attrs:{label:!0,value:t.virtualScroll.curRow===e.row},on:{change:function(n){return t.onRadioChange(e.row)}}},[n("span")]):"v-index"===e.column.type?n("span",[t._v("\n        "+t._s(t.getIndex(e))+"\n      ")]):[t._v("\n        "+t._s(e.row[e.column.property])+"\n      ")]]]}}],null,!0)},"el-table-column",t.$attrs,!1),t.$listeners))});Ft._withStripped=!0}).call(this,n("c8ba"))},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),o=n("23cb"),a=n("50c4");t.exports=function(t){var e=i(this),n=a(e.length),r=arguments.length,s=o(r>1?arguments[1]:void 0,n),c=r>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);while(l>s)e[s++]=t;return e}},"90c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7"),n("25f0");var i=n("3452"),o=n.n(i);function a(t,e){var n=o.a.enc.Utf8.parse(e),i=o.a.enc.Utf8.parse(e),a=o.a.enc.Base64.parse(t),r=o.a.enc.Base64.stringify(a),s=o.a.AES.decrypt(r,n,{iv:i,mode:o.a.mode.CBC,padding:o.a.pad.ZeroPadding}),c=s.toString(o.a.enc.Utf8);return c.toString()}},addb:function(t,e){var n=Math.floor,i=function(t,e){var r=t.length,s=n(r/2);return r<8?o(t,e):a(i(t.slice(0,s),e),i(t.slice(s),e),e)},o=function(t,e){var n,i,o=t.length,a=1;while(a<o){i=a,n=t[a];while(i&&e(t[i-1],n)>0)t[i]=t[--i];i!==a++&&(t[i]=n)}return t},a=function(t,e,n){var i=t.length,o=e.length,a=0,r=0,s=[];while(a<i||r<o)a<i&&r<o?s.push(n(t[a],e[r])<=0?t[a++]:e[r++]):s.push(a<i?t[a++]:e[r++]);return s};t.exports=i},b742:function(t,e,n){"use strict";n("c5a8")},c5a8:function(t,e,n){},cb29:function(t,e,n){var i=n("23e7"),o=n("81d5"),a=n("44d2");i({target:"Array",proto:!0},{fill:o}),a("fill")},d998:function(t,e,n){var i=n("342f");t.exports=/MSIE|Trident/.test(i)}}]);